# Video Processing Pipeline Configuration
# This file defines the default configuration for the pipeline

# Video source directories
# Organized by show for better management
sources:
  # Main input folder - organized by show
  - path: "input_videos/TheNewsForum/ForumDailyNews"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: true
  - path: "input_videos/TheNewsForum/BoomAndBust"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: true
  - path: "input_videos/TheNewsForum/CommunityProfile"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: true
  - path: "input_videos/TheNewsForum/EconomicPulse"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: true
  - path: "input_videos/TheNewsForum/FreedomForum"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: true
  
  # Uncategorized videos (to be sorted later)
  - path: "input_videos/_uncategorized"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov", "*.webm", "*.flv"]
    exclude: []
    enabled: true
  
  # Temporary upload folder (from Streamlit uploads)
  - path: "data/temp/uploaded"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov", "*.webm", "*.flv"]
    exclude: []
    enabled: true
  
  # Legacy folder (kept for backward compatibility - can be disabled later)
  - path: "test_videos/newsroom/2024"
    include: ["*.mp4", "*.mkv", "*.avi", "*.mov"]
    exclude: []
    enabled: false  # Disabled - use organized structure above

# Staging area for temporary files
staging:
  enabled: true
  path: "staging"
  cleanup_after_processing: true

# Video discovery settings (optimized for high-end system)
discovery:
  stability_minutes: 5
  max_concurrent_scans: 16 # Leverage more cores for scanning
  scan_interval_seconds: 300

# AI model configuration (optimized for RTX 4080)
models:
  whisper: "large-v3" # Use the best model with your GPU
  llm: "mistral"
  diarization_device: "cuda"
  num_speakers: 0  # 0 = auto-detect, or set to actual number if known

# Ollama configuration for AI enrichment
ollama:
  enabled: true
  host: "http://localhost:11434"
  model: "llama3.1:latest" # Best model for news analysis
  timeout: 300 # 5 minutes for AI generation

# Enrichment configuration
enrichment:
  ollama_enabled: true
  summary_max_tokens: 500
  takeaways_count: 7
  topics_count: 10
  segment_chunk_size: 10 # Lines per segment

# Episode naming and organization
organization:
  # Folder structure: {show_folder}/{year} creates "ForumDailyNews/2024/"
  folder_structure: "{show_folder}/{year}"
  
  # Episode ID template: {show_folder}_ep{episode_number}_{date}
  # Example: ForumDailyNews_ep140_2024-10-27
  episode_template: "{show_folder}_ep{episode_number}_{date}"
  
  # Date format for episode IDs
  date_format: "%Y-%m-%d"  # YYYY-MM-DD format
  
  # Fallback naming for episodes without AI-extracted show name
  fallback_template: "{source_name}_{timestamp}"
  
  # Folder for uncategorized episodes
  uncategorized_folder: "_uncategorized"

# Confidence thresholds
thresholds:
  confidence_min: 0.6
  entity_confidence: 0.7
  expert_score: 0.75
  publish_score: 0.6

# Database configuration
database:
  path: "data/pipeline.db"
  backup_enabled: true
  backup_interval_hours: 24

# Logging configuration
logging:
  level: "INFO"
  directory: "logs"
  max_file_size_mb: 10
  backup_count: 5
  console: true
  structured: true

# Processing limits and concurrency (optimized for Threadripper PRO 5995WX)
processing:
  max_concurrent_episodes: 4 # Start conservative, can increase later
  max_retry_attempts: 3
  retry_delay_seconds: 30
  timeout_minutes: 120

# Resource limits (optimized for high-end workstation)
resources:
  max_memory_percent: 95.0 # 128GB allows very high usage
  max_cpu_percent: 95.0 # 64 cores can handle very high load
  max_disk_usage_percent: 95.0
  max_open_files: 4000

# API rate limiting
api_rate_limit_delay: 0.5
